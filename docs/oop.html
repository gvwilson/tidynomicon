<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Chapter 9 Object-Oriented Programming | The Tidynomicon</title>
  <meta name="description" content="Chapter 9 Object-Oriented Programming | The Tidynomicon">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="Chapter 9 Object-Oriented Programming | The Tidynomicon" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Chapter 9 Object-Oriented Programming | The Tidynomicon" />
  <meta name="github-repo" content="gvwilson/tidynomicon" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 9 Object-Oriented Programming | The Tidynomicon" />
  
  <meta name="twitter:description" content="Chapter 9 Object-Oriented Programming | The Tidynomicon" />
  

<meta name="author" content="Greg Wilson">


<meta name="date" content="2019-05-15">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="nse.html">
<link rel="next" href="debt.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  { background-color: #f8f8f8; }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">The Tidynomicon</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#s:index-personas"><i class="fa fa-check"></i><b>1.1</b> Who are these lessons for?</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="basics.html"><a href="basics.html"><i class="fa fa-check"></i><b>2</b> Values and Vectors</a><ul>
<li class="chapter" data-level="2.1" data-path="basics.html"><a href="basics.html#questions"><i class="fa fa-check"></i><b>2.1</b> Questions</a></li>
<li class="chapter" data-level="2.2" data-path="basics.html"><a href="basics.html#learning-objectives"><i class="fa fa-check"></i><b>2.2</b> Learning Objectives</a></li>
<li class="chapter" data-level="2.3" data-path="basics.html"><a href="basics.html#how-do-i-say-hello"><i class="fa fa-check"></i><b>2.3</b> How do I say hello?</a></li>
<li class="chapter" data-level="2.4" data-path="basics.html"><a href="basics.html#how-do-i-add-numbers"><i class="fa fa-check"></i><b>2.4</b> How do I add numbers?</a></li>
<li class="chapter" data-level="2.5" data-path="basics.html"><a href="basics.html#how-do-i-store-many-numbers-together"><i class="fa fa-check"></i><b>2.5</b> How do I store many numbers together?</a></li>
<li class="chapter" data-level="2.6" data-path="basics.html"><a href="basics.html#how-do-i-index-a-vector"><i class="fa fa-check"></i><b>2.6</b> How do I index a vector?</a></li>
<li class="chapter" data-level="2.7" data-path="basics.html"><a href="basics.html#how-do-i-create-new-vectors-from-old"><i class="fa fa-check"></i><b>2.7</b> How do I create new vectors from old?</a></li>
<li class="chapter" data-level="2.8" data-path="basics.html"><a href="basics.html#how-else-does-r-represent-the-absence-of-data"><i class="fa fa-check"></i><b>2.8</b> How else does R represent the absence of data?</a></li>
<li class="chapter" data-level="2.9" data-path="basics.html"><a href="basics.html#key-points"><i class="fa fa-check"></i><b>2.9</b> Key Points</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="indexing.html"><a href="indexing.html"><i class="fa fa-check"></i><b>3</b> Indexing</a><ul>
<li class="chapter" data-level="3.1" data-path="indexing.html"><a href="indexing.html#questions-1"><i class="fa fa-check"></i><b>3.1</b> Questions</a></li>
<li class="chapter" data-level="3.2" data-path="indexing.html"><a href="indexing.html#learning-objectives-1"><i class="fa fa-check"></i><b>3.2</b> Learning Objectives</a></li>
<li class="chapter" data-level="3.3" data-path="indexing.html"><a href="indexing.html#how-can-i-store-a-mix-of-different-types-of-objects"><i class="fa fa-check"></i><b>3.3</b> How can I store a mix of different types of objects?</a></li>
<li class="chapter" data-level="3.4" data-path="indexing.html"><a href="indexing.html#what-is-the-difference-between-and"><i class="fa fa-check"></i><b>3.4</b> What is the difference between <code>[</code> and <code>[[</code>?</a></li>
<li class="chapter" data-level="3.5" data-path="indexing.html"><a href="indexing.html#how-can-i-access-elements-by-name"><i class="fa fa-check"></i><b>3.5</b> How can I access elements by name?</a></li>
<li class="chapter" data-level="3.6" data-path="indexing.html"><a href="indexing.html#how-can-i-create-and-index-a-matrix"><i class="fa fa-check"></i><b>3.6</b> How can I create and index a matrix?</a></li>
<li class="chapter" data-level="3.7" data-path="indexing.html"><a href="indexing.html#key-points-1"><i class="fa fa-check"></i><b>3.7</b> Key Points</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="control.html"><a href="control.html"><i class="fa fa-check"></i><b>4</b> Control Flow</a><ul>
<li class="chapter" data-level="4.1" data-path="control.html"><a href="control.html#questions-2"><i class="fa fa-check"></i><b>4.1</b> Questions</a></li>
<li class="chapter" data-level="4.2" data-path="control.html"><a href="control.html#learning-objectives-2"><i class="fa fa-check"></i><b>4.2</b> Learning Objectives</a></li>
<li class="chapter" data-level="4.3" data-path="control.html"><a href="control.html#how-do-i-choose-and-repeat-things"><i class="fa fa-check"></i><b>4.3</b> How do I choose and repeat things?</a></li>
<li class="chapter" data-level="4.4" data-path="control.html"><a href="control.html#how-can-i-express-a-range-of-values-in-r"><i class="fa fa-check"></i><b>4.4</b> How can I express a range of values in R?</a></li>
<li class="chapter" data-level="4.5" data-path="control.html"><a href="control.html#how-can-i-use-a-vector-in-a-conditional-statement"><i class="fa fa-check"></i><b>4.5</b> How can I use a vector in a conditional statement?</a></li>
<li class="chapter" data-level="4.6" data-path="control.html"><a href="control.html#how-do-i-create-and-call-functions"><i class="fa fa-check"></i><b>4.6</b> How do I create and call functions?</a></li>
<li class="chapter" data-level="4.7" data-path="control.html"><a href="control.html#how-can-i-write-a-function-that-takes-a-varying-number-of-arguments"><i class="fa fa-check"></i><b>4.7</b> How can I write a function that takes a varying number of arguments?</a></li>
<li class="chapter" data-level="4.8" data-path="control.html"><a href="control.html#how-can-i-provide-default-values-for-arguments"><i class="fa fa-check"></i><b>4.8</b> How can I provide default values for arguments?</a></li>
<li class="chapter" data-level="4.9" data-path="control.html"><a href="control.html#how-can-i-hide-the-value-that-r-returns"><i class="fa fa-check"></i><b>4.9</b> How can I hide the value that R returns?</a></li>
<li class="chapter" data-level="4.10" data-path="control.html"><a href="control.html#how-can-i-assign-to-a-global-variable-from-inside-a-function"><i class="fa fa-check"></i><b>4.10</b> How can I assign to a global variable from inside a function?</a></li>
<li class="chapter" data-level="4.11" data-path="control.html"><a href="control.html#key-points-2"><i class="fa fa-check"></i><b>4.11</b> Key Points</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="tidyverse.html"><a href="tidyverse.html"><i class="fa fa-check"></i><b>5</b> The Tidyverse</a><ul>
<li class="chapter" data-level="5.1" data-path="tidyverse.html"><a href="tidyverse.html#questions-3"><i class="fa fa-check"></i><b>5.1</b> Questions</a></li>
<li class="chapter" data-level="5.2" data-path="tidyverse.html"><a href="tidyverse.html#learning-objectives-3"><i class="fa fa-check"></i><b>5.2</b> Learning Objectives</a></li>
<li class="chapter" data-level="5.3" data-path="tidyverse.html"><a href="tidyverse.html#how-do-i-read-data"><i class="fa fa-check"></i><b>5.3</b> How do I read data?</a></li>
<li class="chapter" data-level="5.4" data-path="tidyverse.html"><a href="tidyverse.html#how-do-i-inspect-data"><i class="fa fa-check"></i><b>5.4</b> How do I inspect data?</a></li>
<li class="chapter" data-level="5.5" data-path="tidyverse.html"><a href="tidyverse.html#how-do-i-index-rows-and-columns"><i class="fa fa-check"></i><b>5.5</b> How do I index rows and columns?</a></li>
<li class="chapter" data-level="5.6" data-path="tidyverse.html"><a href="tidyverse.html#how-do-i-calculate-basic-statistics"><i class="fa fa-check"></i><b>5.6</b> How do I calculate basic statistics?</a></li>
<li class="chapter" data-level="5.7" data-path="tidyverse.html"><a href="tidyverse.html#how-do-i-filter-data"><i class="fa fa-check"></i><b>5.7</b> How do I filter data?</a></li>
<li class="chapter" data-level="5.8" data-path="tidyverse.html"><a href="tidyverse.html#how-do-i-write-tidy-code"><i class="fa fa-check"></i><b>5.8</b> How do I write tidy code?</a></li>
<li class="chapter" data-level="5.9" data-path="tidyverse.html"><a href="tidyverse.html#how-do-i-model-my-data"><i class="fa fa-check"></i><b>5.9</b> How do I model my data?</a></li>
<li class="chapter" data-level="5.10" data-path="tidyverse.html"><a href="tidyverse.html#how-do-i-create-a-plot"><i class="fa fa-check"></i><b>5.10</b> How do I create a plot?</a></li>
<li class="chapter" data-level="5.11" data-path="tidyverse.html"><a href="tidyverse.html#key-points-3"><i class="fa fa-check"></i><b>5.11</b> Key Points</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="cleanup.html"><a href="cleanup.html"><i class="fa fa-check"></i><b>6</b> Cleaning Up Data</a><ul>
<li class="chapter" data-level="6.1" data-path="cleanup.html"><a href="cleanup.html#questions-4"><i class="fa fa-check"></i><b>6.1</b> Questions</a></li>
<li class="chapter" data-level="6.2" data-path="cleanup.html"><a href="cleanup.html#learning-objectives-4"><i class="fa fa-check"></i><b>6.2</b> Learning Objectives</a></li>
<li class="chapter" data-level="6.3" data-path="cleanup.html"><a href="cleanup.html#how-do-i-inspect-the-raw-data"><i class="fa fa-check"></i><b>6.3</b> How do I inspect the raw data?</a></li>
<li class="chapter" data-level="6.4" data-path="cleanup.html"><a href="cleanup.html#how-do-i-tidy-the-data"><i class="fa fa-check"></i><b>6.4</b> How do I tidy the data?</a></li>
<li class="chapter" data-level="6.5" data-path="cleanup.html"><a href="cleanup.html#key-points-4"><i class="fa fa-check"></i><b>6.5</b> Key Points</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="testerror.html"><a href="testerror.html"><i class="fa fa-check"></i><b>7</b> Testing and Error Handling</a><ul>
<li class="chapter" data-level="7.1" data-path="testerror.html"><a href="testerror.html#questions-5"><i class="fa fa-check"></i><b>7.1</b> Questions</a></li>
<li class="chapter" data-level="7.2" data-path="testerror.html"><a href="testerror.html#learning-objectives-5"><i class="fa fa-check"></i><b>7.2</b> Learning Objectives</a></li>
<li class="chapter" data-level="7.3" data-path="testerror.html"><a href="testerror.html#how-does-r-handle-errors"><i class="fa fa-check"></i><b>7.3</b> How does R handle errors?</a></li>
<li class="chapter" data-level="7.4" data-path="testerror.html"><a href="testerror.html#what-should-i-know-about-testing-in-general"><i class="fa fa-check"></i><b>7.4</b> What should I know about testing in general?</a></li>
<li class="chapter" data-level="7.5" data-path="testerror.html"><a href="testerror.html#how-should-i-organize-my-tests"><i class="fa fa-check"></i><b>7.5</b> How should I organize my tests?</a></li>
<li class="chapter" data-level="7.6" data-path="testerror.html"><a href="testerror.html#how-can-i-write-a-few-simple-tests"><i class="fa fa-check"></i><b>7.6</b> How can I write a few simple tests?</a></li>
<li class="chapter" data-level="7.7" data-path="testerror.html"><a href="testerror.html#how-can-i-check-data-transformation"><i class="fa fa-check"></i><b>7.7</b> How can I check data transformation?</a><ul>
<li class="chapter" data-level="7.7.1" data-path="testerror.html"><a href="testerror.html#how-can-i-reorganize-code-to-make-it-more-testable"><i class="fa fa-check"></i><b>7.7.1</b> How can I reorganize code to make it more testable?</a></li>
</ul></li>
<li class="chapter" data-level="7.8" data-path="testerror.html"><a href="testerror.html#key-points-5"><i class="fa fa-check"></i><b>7.8</b> Key Points</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="nse.html"><a href="nse.html"><i class="fa fa-check"></i><b>8</b> Non-Standard Evaluation</a><ul>
<li class="chapter" data-level="8.1" data-path="nse.html"><a href="nse.html#questions-6"><i class="fa fa-check"></i><b>8.1</b> Questions</a></li>
<li class="chapter" data-level="8.2" data-path="nse.html"><a href="nse.html#learning-objectives-6"><i class="fa fa-check"></i><b>8.2</b> Learning Objectives</a></li>
<li class="chapter" data-level="8.3" data-path="nse.html"><a href="nse.html#how-does-python-evaluate-function-calls"><i class="fa fa-check"></i><b>8.3</b> How does Python evaluate function calls?</a></li>
<li class="chapter" data-level="8.4" data-path="nse.html"><a href="nse.html#how-does-r-evaluate-the-same-kind-of-thing"><i class="fa fa-check"></i><b>8.4</b> How does R evaluate the same kind of thing?</a></li>
<li class="chapter" data-level="8.5" data-path="nse.html"><a href="nse.html#why-is-lazy-evaluation-useful"><i class="fa fa-check"></i><b>8.5</b> Why is lazy evaluation useful?</a></li>
<li class="chapter" data-level="8.6" data-path="nse.html"><a href="nse.html#what-is-tidy-evaluation"><i class="fa fa-check"></i><b>8.6</b> What is tidy evaluation?</a></li>
<li class="chapter" data-level="8.7" data-path="nse.html"><a href="nse.html#is-it-worth-it"><i class="fa fa-check"></i><b>8.7</b> Is it worth it?</a></li>
<li class="chapter" data-level="8.8" data-path="nse.html"><a href="nse.html#key-points-6"><i class="fa fa-check"></i><b>8.8</b> Key Points</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="oop.html"><a href="oop.html"><i class="fa fa-check"></i><b>9</b> Object-Oriented Programming</a><ul>
<li class="chapter" data-level="9.1" data-path="oop.html"><a href="oop.html#questions-7"><i class="fa fa-check"></i><b>9.1</b> Questions</a></li>
<li class="chapter" data-level="9.2" data-path="oop.html"><a href="oop.html#learning-objectives-7"><i class="fa fa-check"></i><b>9.2</b> Learning Objectives</a></li>
<li class="chapter" data-level="9.3" data-path="oop.html"><a href="oop.html#what-are-attributes"><i class="fa fa-check"></i><b>9.3</b> What are attributes?</a></li>
<li class="chapter" data-level="9.4" data-path="oop.html"><a href="oop.html#how-are-classes-represented"><i class="fa fa-check"></i><b>9.4</b> How are classes represented?</a></li>
<li class="chapter" data-level="9.5" data-path="oop.html"><a href="oop.html#how-does-inheritance-work"><i class="fa fa-check"></i><b>9.5</b> How does inheritance work?</a></li>
<li class="chapter" data-level="9.6" data-path="oop.html"><a href="oop.html#key-points-7"><i class="fa fa-check"></i><b>9.6</b> Key Points</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="debt.html"><a href="debt.html"><i class="fa fa-check"></i><b>10</b> Intellectual Debt</a><ul>
<li class="chapter" data-level="10.1" data-path="debt.html"><a href="debt.html#questions-8"><i class="fa fa-check"></i><b>10.1</b> Questions</a></li>
<li class="chapter" data-level="10.2" data-path="debt.html"><a href="debt.html#learning-objectives-8"><i class="fa fa-check"></i><b>10.2</b> Learning Objectives</a></li>
<li class="chapter" data-level="10.3" data-path="debt.html"><a href="debt.html#why-shouldnt-i-use-setwd"><i class="fa fa-check"></i><b>10.3</b> Why shouldn’t I use <code>setwd</code>?</a></li>
<li class="chapter" data-level="10.4" data-path="debt.html"><a href="debt.html#what-the-hell-are-factors"><i class="fa fa-check"></i><b>10.4</b> What the hell are factors?</a></li>
<li class="chapter" data-level="10.5" data-path="debt.html"><a href="debt.html#how-do-i-refer-to-various-arguments-in-a-pipeline"><i class="fa fa-check"></i><b>10.5</b> How do I refer to various arguments in a pipeline?</a></li>
<li class="chapter" data-level="10.6" data-path="debt.html"><a href="debt.html#how-does-r-give-the-appearance-of-immutable-data"><i class="fa fa-check"></i><b>10.6</b> How does R give the appearance of immutable data?</a></li>
<li class="chapter" data-level="10.7" data-path="debt.html"><a href="debt.html#what-else-should-i-worry-about"><i class="fa fa-check"></i><b>10.7</b> What else should I worry about?</a><ul>
<li class="chapter" data-level="10.7.1" data-path="debt.html"><a href="debt.html#the-order-function"><i class="fa fa-check"></i><b>10.7.1</b> The <code>order</code> function</a></li>
<li class="chapter" data-level="10.7.2" data-path="debt.html"><a href="debt.html#one-of-a-set-of-values"><i class="fa fa-check"></i><b>10.7.2</b> One of a set of values</a></li>
<li class="chapter" data-level="10.7.3" data-path="debt.html"><a href="debt.html#and-are-not-the-same-as-and"><i class="fa fa-check"></i><b>10.7.3</b> <code>|</code> and <code>&amp;</code> are not the same as <code>||</code> and <code>&amp;&amp;</code></a></li>
<li class="chapter" data-level="10.7.4" data-path="debt.html"><a href="debt.html#functions-and-columns"><i class="fa fa-check"></i><b>10.7.4</b> Functions and columns</a></li>
</ul></li>
<li class="chapter" data-level="10.8" data-path="debt.html"><a href="debt.html#key-points-8"><i class="fa fa-check"></i><b>10.8</b> Key Points</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="practice.html"><a href="practice.html"><i class="fa fa-check"></i><b>11</b> Practice</a><ul>
<li class="chapter" data-level="11.1" data-path="practice.html"><a href="practice.html#working-with-a-single-tidy-table"><i class="fa fa-check"></i><b>11.1</b> Working with a single tidy table</a></li>
<li class="chapter" data-level="11.2" data-path="practice.html"><a href="practice.html#working-with-grouped-data"><i class="fa fa-check"></i><b>11.2</b> Working with grouped data</a></li>
<li class="chapter" data-level="11.3" data-path="practice.html"><a href="practice.html#creating-charts"><i class="fa fa-check"></i><b>11.3</b> Creating charts</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="projects.html"><a href="projects.html"><i class="fa fa-check"></i><b>12</b> Projects</a><ul>
<li class="chapter" data-level="12.1" data-path="projects.html"><a href="projects.html#questions-9"><i class="fa fa-check"></i><b>12.1</b> Questions</a></li>
<li class="chapter" data-level="12.2" data-path="projects.html"><a href="projects.html#learning-objectives-9"><i class="fa fa-check"></i><b>12.2</b> Learning Objectives</a></li>
<li class="chapter" data-level="12.3" data-path="projects.html"><a href="projects.html#whats-in-an-r-package"><i class="fa fa-check"></i><b>12.3</b> What’s in an R package?</a></li>
<li class="chapter" data-level="12.4" data-path="projects.html"><a href="projects.html#how-do-i-create-a-package"><i class="fa fa-check"></i><b>12.4</b> How do I create a package?</a></li>
<li class="chapter" data-level="12.5" data-path="projects.html"><a href="projects.html#key-points-9"><i class="fa fa-check"></i><b>12.5</b> Key Points</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="shiny.html"><a href="shiny.html"><i class="fa fa-check"></i><b>13</b> Web Applications</a><ul>
<li class="chapter" data-level="13.1" data-path="shiny.html"><a href="shiny.html#questions-10"><i class="fa fa-check"></i><b>13.1</b> Questions</a></li>
<li class="chapter" data-level="13.2" data-path="shiny.html"><a href="shiny.html#learning-objectives-10"><i class="fa fa-check"></i><b>13.2</b> Learning Objectives</a></li>
<li class="chapter" data-level="13.3" data-path="shiny.html"><a href="shiny.html#how-do-i-set-up-a-simple-application"><i class="fa fa-check"></i><b>13.3</b> How do I set up a simple application?</a></li>
<li class="chapter" data-level="13.4" data-path="shiny.html"><a href="shiny.html#how-do-i-create-a-user-interface"><i class="fa fa-check"></i><b>13.4</b> How do I create a user interface?</a></li>
<li class="chapter" data-level="13.5" data-path="shiny.html"><a href="shiny.html#how-do-i-create-a-server"><i class="fa fa-check"></i><b>13.5</b> How do I create a server?</a></li>
<li class="chapter" data-level="13.6" data-path="shiny.html"><a href="shiny.html#how-do-i-run-my-application"><i class="fa fa-check"></i><b>13.6</b> How do I run my application?</a></li>
<li class="chapter" data-level="13.7" data-path="shiny.html"><a href="shiny.html#how-can-i-improve-my-user-interface"><i class="fa fa-check"></i><b>13.7</b> How can I improve my user interface?</a></li>
<li class="chapter" data-level="13.8" data-path="shiny.html"><a href="shiny.html#how-can-i-display-the-data-in-a-file"><i class="fa fa-check"></i><b>13.8</b> How can I display the data in a file?</a></li>
<li class="chapter" data-level="13.9" data-path="shiny.html"><a href="shiny.html#how-can-i-break-circular-dependencies"><i class="fa fa-check"></i><b>13.9</b> How can I break circular dependencies?</a></li>
<li class="chapter" data-level="13.10" data-path="shiny.html"><a href="shiny.html#how-can-i-control-how-the-user-interface-is-rendered"><i class="fa fa-check"></i><b>13.10</b> How can I control how the user interface is rendered?</a></li>
<li class="chapter" data-level="13.11" data-path="shiny.html"><a href="shiny.html#key-points-10"><i class="fa fa-check"></i><b>13.11</b> Key Points</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="python.html"><a href="python.html"><i class="fa fa-check"></i><b>14</b> Using Python</a><ul>
<li class="chapter" data-level="14.1" data-path="python.html"><a href="python.html#questions-11"><i class="fa fa-check"></i><b>14.1</b> Questions</a></li>
<li class="chapter" data-level="14.2" data-path="python.html"><a href="python.html#learning-objectives-11"><i class="fa fa-check"></i><b>14.2</b> Learning Objectives</a></li>
<li class="chapter" data-level="14.3" data-path="python.html"><a href="python.html#how-can-i-access-data-across-languages"><i class="fa fa-check"></i><b>14.3</b> How can I access data across languages?</a></li>
<li class="chapter" data-level="14.4" data-path="python.html"><a href="python.html#how-can-i-call-functions-across-languages"><i class="fa fa-check"></i><b>14.4</b> How can I call functions across languages?</a></li>
<li class="chapter" data-level="14.5" data-path="python.html"><a href="python.html#key-points-11"><i class="fa fa-check"></i><b>14.5</b> Key Points</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="license.html"><a href="license.html"><i class="fa fa-check"></i><b>A</b> License</a></li>
<li class="chapter" data-level="B" data-path="code-of-conduct.html"><a href="code-of-conduct.html"><i class="fa fa-check"></i><b>B</b> Code of Conduct</a><ul>
<li class="chapter" data-level="B.1" data-path="code-of-conduct.html"><a href="code-of-conduct.html#our-standards"><i class="fa fa-check"></i><b>B.1</b> Our Standards</a></li>
<li class="chapter" data-level="B.2" data-path="code-of-conduct.html"><a href="code-of-conduct.html#our-responsibilities"><i class="fa fa-check"></i><b>B.2</b> Our Responsibilities</a></li>
<li class="chapter" data-level="B.3" data-path="code-of-conduct.html"><a href="code-of-conduct.html#scope"><i class="fa fa-check"></i><b>B.3</b> Scope</a></li>
<li class="chapter" data-level="B.4" data-path="code-of-conduct.html"><a href="code-of-conduct.html#enforcement"><i class="fa fa-check"></i><b>B.4</b> Enforcement</a></li>
<li class="chapter" data-level="B.5" data-path="code-of-conduct.html"><a href="code-of-conduct.html#attribution"><i class="fa fa-check"></i><b>B.5</b> Attribution</a></li>
</ul></li>
<li class="chapter" data-level="C" data-path="citation.html"><a href="citation.html"><i class="fa fa-check"></i><b>C</b> Citation</a></li>
<li class="chapter" data-level="D" data-path="contributing.html"><a href="contributing.html"><i class="fa fa-check"></i><b>D</b> Contributing</a></li>
<li class="chapter" data-level="E" data-path="glossary.html"><a href="glossary.html"><i class="fa fa-check"></i><b>E</b> Glossary</a></li>
<li class="chapter" data-level="F" data-path="objectives.html"><a href="objectives.html"><i class="fa fa-check"></i><b>F</b> Learning Objectives</a><ul>
<li class="chapter" data-level="F.1" data-path="objectives.html"><a href="objectives.html#values-and-vectors"><i class="fa fa-check"></i><b>F.1</b> Values and Vectors</a></li>
<li class="chapter" data-level="F.2" data-path="objectives.html"><a href="objectives.html#indexing-1"><i class="fa fa-check"></i><b>F.2</b> Indexing</a></li>
<li class="chapter" data-level="F.3" data-path="objectives.html"><a href="objectives.html#control-flow"><i class="fa fa-check"></i><b>F.3</b> Control Flow</a></li>
<li class="chapter" data-level="F.4" data-path="objectives.html"><a href="objectives.html#the-tidyverse"><i class="fa fa-check"></i><b>F.4</b> The Tidyverse</a></li>
<li class="chapter" data-level="F.5" data-path="objectives.html"><a href="objectives.html#cleaning-up-data"><i class="fa fa-check"></i><b>F.5</b> Cleaning Up Data</a></li>
<li class="chapter" data-level="F.6" data-path="objectives.html"><a href="objectives.html#testing-and-error-handling"><i class="fa fa-check"></i><b>F.6</b> Testing and Error Handling</a></li>
<li class="chapter" data-level="F.7" data-path="objectives.html"><a href="objectives.html#non-standard-evaluation"><i class="fa fa-check"></i><b>F.7</b> Non-Standard Evaluation</a></li>
<li class="chapter" data-level="F.8" data-path="objectives.html"><a href="objectives.html#object-oriented-programming"><i class="fa fa-check"></i><b>F.8</b> Object-Oriented Programming</a></li>
<li class="chapter" data-level="F.9" data-path="objectives.html"><a href="objectives.html#intellectual-debt"><i class="fa fa-check"></i><b>F.9</b> Intellectual Debt</a></li>
<li class="chapter" data-level="F.10" data-path="objectives.html"><a href="objectives.html#projects-1"><i class="fa fa-check"></i><b>F.10</b> Projects</a></li>
<li class="chapter" data-level="F.11" data-path="objectives.html"><a href="objectives.html#web-applications-with-shiny"><i class="fa fa-check"></i><b>F.11</b> Web Applications with Shiny</a></li>
<li class="chapter" data-level="F.12" data-path="objectives.html"><a href="objectives.html#reticulate"><i class="fa fa-check"></i><b>F.12</b> Reticulate</a></li>
</ul></li>
<li class="chapter" data-level="G" data-path="keypoints.html"><a href="keypoints.html"><i class="fa fa-check"></i><b>G</b> Key Points</a><ul>
<li class="chapter" data-level="G.1" data-path="keypoints.html"><a href="keypoints.html#values-and-vectors-1"><i class="fa fa-check"></i><b>G.1</b> Values and Vectors</a></li>
<li class="chapter" data-level="G.2" data-path="keypoints.html"><a href="keypoints.html#indexing-2"><i class="fa fa-check"></i><b>G.2</b> Indexing</a></li>
<li class="chapter" data-level="G.3" data-path="keypoints.html"><a href="keypoints.html#control-flow-1"><i class="fa fa-check"></i><b>G.3</b> Control Flow</a></li>
<li class="chapter" data-level="G.4" data-path="keypoints.html"><a href="keypoints.html#the-tidyverse-1"><i class="fa fa-check"></i><b>G.4</b> The Tidyverse</a></li>
<li class="chapter" data-level="G.5" data-path="keypoints.html"><a href="keypoints.html#cleaning-up-data-1"><i class="fa fa-check"></i><b>G.5</b> Cleaning Up Data</a></li>
<li class="chapter" data-level="G.6" data-path="keypoints.html"><a href="keypoints.html#testing-and-error-handling-1"><i class="fa fa-check"></i><b>G.6</b> Testing and Error Handling</a></li>
<li class="chapter" data-level="G.7" data-path="keypoints.html"><a href="keypoints.html#non-standard-evaluation-1"><i class="fa fa-check"></i><b>G.7</b> Non-Standard Evaluation</a></li>
<li class="chapter" data-level="G.8" data-path="keypoints.html"><a href="keypoints.html#object-oriented-programming-1"><i class="fa fa-check"></i><b>G.8</b> Object-Oriented Programming</a></li>
<li class="chapter" data-level="G.9" data-path="keypoints.html"><a href="keypoints.html#intellectual-debt-1"><i class="fa fa-check"></i><b>G.9</b> Intellectual Debt</a></li>
<li class="chapter" data-level="G.10" data-path="keypoints.html"><a href="keypoints.html#projects-2"><i class="fa fa-check"></i><b>G.10</b> Projects</a></li>
<li class="chapter" data-level="G.11" data-path="keypoints.html"><a href="keypoints.html#web-applications-with-shiny-1"><i class="fa fa-check"></i><b>G.11</b> Web Applications with Shiny</a></li>
<li class="chapter" data-level="G.12" data-path="keypoints.html"><a href="keypoints.html#reticulate-1"><i class="fa fa-check"></i><b>G.12</b> Reticulate</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">The Tidynomicon</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="oop" class="section level1">
<h1><span class="header-section-number">Chapter 9</span> Object-Oriented Programming</h1>
<div id="questions-7" class="section level2">
<h2><span class="header-section-number">9.1</span> Questions</h2>
<ul>
<li>How can I do object-oriented programming in R?</li>
<li>How do I specify an object’s class?</li>
<li>How do I provide methods for a class?</li>
<li>How should I create objects of a class I have defined?</li>
</ul>
</div>
<div id="learning-objectives-7" class="section level2">
<h2><span class="header-section-number">9.2</span> Learning Objectives</h2>
<ul>
<li>Correctly identify the most commonly used object-oriented programming system in R.</li>
<li>Explain what attributes R and correctly set and query objects’ attributes, class, and dimensions.</li>
<li>Explain how to define a new method for a class.</li>
<li>Describe and implement the three functions that should be written for any user-defined class.</li>
</ul>
<p>Programmers spend a great deal of their time trying to create order out of chaos,
and the rest of their time inventing new ways to create more chaos.
Object-oriented programming serves both needs well:
it allows good software designers to create marvels,
and less conscientious or less experienced ones to manufacture horrors.</p>
<p>R has not one, not two, but at least three different frameworks for object-oriented programming.
By far the most widely used is <a href="glossary.html#S3">S3</a>
(because it was first introduced with Version 3 of S,
the language from which R is derived).
Unlike the approaches used in Python and similarly pedestrian languages,
S3 does not require users to define classes.
Instead,
they add <a href="glossary.html#attribute">attributes</a> to data,
then write specialized versions of <a href="glossary.html#generic-function">generic functions</a>
to process data identified by those attributes.
Since attributes can be used in other ways as well,
we will start by exploring them.</p>
</div>
<div id="what-are-attributes" class="section level2">
<h2><span class="header-section-number">9.3</span> What are attributes?</h2>
<p>Let’s begin by creating a matrix containing the first few hundreds:</p>
<pre class="sourceCode r"><code class="sourceCode r">values &lt;-<span class="st"> </span><span class="dv">100</span> <span class="op">*</span><span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">9</span> <span class="co"># creates c(100, 200, ..., 900)</span>
m &lt;-<span class="st"> </span><span class="kw">matrix</span>(values, <span class="dt">nrow =</span> <span class="dv">3</span>, <span class="dt">ncol =</span> <span class="dv">3</span>)
m</code></pre>
<pre><code>     [,1] [,2] [,3]
[1,]  100  400  700
[2,]  200  500  800
[3,]  300  600  900</code></pre>
<p>Behind the scenes,
R continues to store our nine values as a vector.
However,
it adds an attribute called <code>class</code> to the vector to identify it as a matrix:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(m)</code></pre>
<pre><code>[1] &quot;matrix&quot;</code></pre>
<p>and another attribute called <code>dim</code> to store its dimensions as a 2-element vector:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(m)</code></pre>
<pre><code>[1] 3 3</code></pre>
<p>An object’s attributes are simply a set of name-value pairs.
We can find out what attributes are present using <code>attributes</code> and show or set individual attributes using <code>attr</code>:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">attr</span>(m, <span class="st">&quot;prospects&quot;</span>) &lt;-<span class="st"> &quot;dismal&quot;</span>
<span class="kw">attributes</span>(m)</code></pre>
<pre><code>$dim
[1] 3 3

$prospects
[1] &quot;dismal&quot;</code></pre>
<p>What are the type and attributes of a tibble?</p>
<pre class="sourceCode r"><code class="sourceCode r">t &lt;-<span class="st"> </span><span class="kw">tribble</span>(
  <span class="op">~</span>a, <span class="op">~</span>b,
  <span class="dv">1</span>, <span class="dv">2</span>,
  <span class="dv">3</span>, <span class="dv">4</span>)
<span class="kw">typeof</span>(t)</code></pre>
<pre><code>[1] &quot;list&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">attributes</span>(t)</code></pre>
<pre><code>$names
[1] &quot;a&quot; &quot;b&quot;

$row.names
[1] 1 2

$class
[1] &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;</code></pre>
<p>This tells us that a tibble is stored as a list (the first line of output),
and that it has an attribute called <code>names</code> that stores the names of its columns,
another called <code>row.names</code> that stores the names of its rows (a feature we should ignore),
and three classes.
These classes tell R what functions to search for when we are (for example)
asking for the length of a tibble (which is the number of rows it contains):</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(t)</code></pre>
<pre><code>[1] 2</code></pre>
</div>
<div id="how-are-classes-represented" class="section level2">
<h2><span class="header-section-number">9.4</span> How are classes represented?</h2>
<p>To show how classes and generic functions work together,
let’s customize the way that 2D coordinates are converted to strings.
First,
we create two coordinate vectors:</p>
<pre class="sourceCode r"><code class="sourceCode r">first &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="fl">0.5</span>, <span class="fl">0.7</span>)
<span class="kw">class</span>(first) &lt;-<span class="st"> &quot;two_d&quot;</span>
<span class="kw">print</span>(first)</code></pre>
<pre><code>[1] 0.5 0.7
attr(,&quot;class&quot;)
[1] &quot;two_d&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">second &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="fl">1.3</span>, <span class="fl">3.1</span>)
<span class="kw">class</span>(second) &lt;-<span class="st"> &quot;two_d&quot;</span>
<span class="kw">print</span>(second)</code></pre>
<pre><code>[1] 1.3 3.1
attr(,&quot;class&quot;)
[1] &quot;two_d&quot;</code></pre>
<p>Separately, we define the behavior of <code>toString</code> for such objects:</p>
<pre class="sourceCode r"><code class="sourceCode r">toString.two_d &lt;-<span class="st"> </span><span class="cf">function</span>(obj){
  <span class="kw">paste0</span>(<span class="st">&quot;&lt;&quot;</span>, obj[<span class="dv">1</span>], <span class="st">&quot;, &quot;</span>, obj[<span class="dv">2</span>], <span class="st">&quot;&gt;&quot;</span>)
}
<span class="kw">toString</span>(first)</code></pre>
<pre><code>[1] &quot;&lt;0.5, 0.7&gt;&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">toString</span>(second)</code></pre>
<pre><code>[1] &quot;&lt;1.3, 3.1&gt;&quot;</code></pre>
<p>S3’s protocol is simple:
given a function F and an object of class C,
S3 looks for a function named F.C.
If it doesn’t find one,
it looks at the object’s next class (assuming it has more than one);
once its user-assigned classes are exhausted,
it uses whatever function the system has defined for its base type (in this case, character vector).
We can trace this process by importing the sloop package and calling <code>s3_dispatch</code>:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(sloop)
<span class="kw">s3_dispatch</span>(<span class="kw">toString</span>(first))</code></pre>
<pre><code>=&gt; toString.two_d
 * toString.default</code></pre>
<p>Compare this with calling <code>toString</code> on a plain old character vector:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">s3_dispatch</span>(<span class="kw">toString</span>(<span class="kw">c</span>(<span class="fl">7.1</span>, <span class="fl">7.2</span>)))</code></pre>
<pre><code>   toString.double
   toString.numeric
=&gt; toString.default</code></pre>
<p>The specialized functions associated with a generic function like <code>toString</code> are called <a href="glossary.html#method">methods</a>.
Unlike languages that require methods to be defined all together as part of a class,
S3 allows us to add methods when and as we see fit.
But that doesn’t mean we should:
minds confined to three dimensions of space and one of time are simply not capable of comprehending
complex class hierarchies.
Instead,
we should always write three functions that work together for a class like <code>two_d</code>:</p>
<ul>
<li>A <a href="glossary.html#constructor">constructor</a> called <code>new_two_d</code>
that creates objects of our class.</li>
<li>An optional <a href="glossary.html#validator">validator</a> called <code>validate_two_d</code>
that checks the consistency and correctness of an object’s values.</li>
<li>An optional <a href="glossary.html#helper">helper</a>, simply called <code>two_d</code>,
that most users will call to create and validate objects.</li>
</ul>
<p>The constructor’s first argument should always be the base object (in our case, the two-element vector).
It should also have one argument for each attribute the object is to have, if any.
Unlike matrices, our 2D points don’t have any extra arguments, so our constructor needs no extra arguments.
Crucially,
the constructor checks the type of its arguments to ensure that the object has at least some chance of being valid.</p>
<pre class="sourceCode r"><code class="sourceCode r">new_two_d &lt;-<span class="st"> </span><span class="cf">function</span>(coordinates){
  <span class="kw">stopifnot</span>(<span class="kw">is.numeric</span>(coordinates))
  <span class="kw">class</span>(coordinates) &lt;-<span class="st"> &quot;two_d&quot;</span>
  coordinates
}

example &lt;-<span class="st"> </span><span class="kw">new_two_d</span>(<span class="kw">c</span>(<span class="fl">4.4</span>, <span class="fl">-2.2</span>))
<span class="kw">toString</span>(example)</code></pre>
<pre><code>[1] &quot;&lt;4.4, -2.2&gt;&quot;</code></pre>
<p>Validators are only needed when checks on data correctness and consistency are expensive.
For example,
if we were to define a class to represent sorted vectors,
checking that each element is no less than its predecessor could take a long time for very long vectors.
To illustrate this,
we will check that we have exactly two coordinates;
in real code,
we would probably include this (inexpensive) check in the constructor.</p>
<pre class="sourceCode r"><code class="sourceCode r">validate_two_d &lt;-<span class="st"> </span><span class="cf">function</span>(coordinates) {
  <span class="kw">stopifnot</span>(<span class="kw">length</span>(coordinates) <span class="op">==</span><span class="st"> </span><span class="dv">2</span>)
  <span class="kw">stopifnot</span>(<span class="kw">class</span>(coordinates) <span class="op">==</span><span class="st"> &quot;two_d&quot;</span>)
}

<span class="kw">validate_two_d</span>(example)    <span class="co"># should succeed silently</span>
<span class="kw">validate_two_d</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>))    <span class="co"># should fail</span></code></pre>
<pre><code>Error in validate_two_d(c(1, 3)): class(coordinates) == &quot;two_d&quot; is not TRUE</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">validate_two_d</span>(<span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>)) <span class="co"># should also fail</span></code></pre>
<pre><code>Error in validate_two_d(c(2, 2, 2)): length(coordinates) == 2 is not TRUE</code></pre>
<p>The third and final function in our trio provides a user-friendly way to construct objects of our new class.
It should call the constructor and the validator (if one exists),
but should also provide a richer set of defaults,
better error messages,
and so on.
To illustrate this,
we shall allow the user to provide either one argument (which must be a two-element vector)
or two (which must each be numeric):</p>
<pre class="sourceCode r"><code class="sourceCode r">two_d &lt;-<span class="st"> </span><span class="cf">function</span>(...){
  args &lt;-<span class="st"> </span><span class="kw">list</span>(...)
  <span class="cf">if</span> (<span class="kw">length</span>(args) <span class="op">==</span><span class="st"> </span><span class="dv">1</span>) {
    args &lt;-<span class="st"> </span>args[[<span class="dv">1</span>]]    <span class="co"># extract original value</span>
  }
  <span class="cf">else</span> <span class="cf">if</span> (<span class="kw">length</span>(args) <span class="op">==</span><span class="st"> </span><span class="dv">2</span>) {
    args &lt;-<span class="st"> </span><span class="kw">unlist</span>(args) <span class="co"># convert list to vector</span>
  }
  result &lt;-<span class="st"> </span><span class="kw">new_two_d</span>(args)
  <span class="kw">validate_two_d</span>(result)
  result
}

here &lt;-<span class="st"> </span><span class="kw">two_d</span>(<span class="fl">10.1</span>, <span class="fl">11.2</span>)
<span class="kw">toString</span>(here)</code></pre>
<pre><code>[1] &quot;&lt;10.1, 11.2&gt;&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">there &lt;-<span class="st"> </span><span class="kw">two_d</span>(<span class="kw">c</span>(<span class="fl">15.6</span>, <span class="fl">16.7</span>))
<span class="kw">toString</span>(there)</code></pre>
<pre><code>[1] &quot;&lt;15.6, 16.7&gt;&quot;</code></pre>
</div>
<div id="how-does-inheritance-work" class="section level2">
<h2><span class="header-section-number">9.5</span> How does inheritance work?</h2>
<p>We said above that an object can have more than one class,
and that S3 searches the classes in order when it wants to find a method to call.
Methods can also trigger invocation of other methods explicitly in order to supplement,
rather than replace,
the behavior of other classes.
To show how this works,
we shall look at that classic of object-oriented design: shapes.
(The safe kind,
of course,
not those whose non-Euclidean angles have placed such intolerable stress on the minds of so many of our colleagues over the years.)
We start by defining a <code>polygon</code> class:</p>
<pre class="sourceCode r"><code class="sourceCode r">new_polygon &lt;-<span class="st"> </span><span class="cf">function</span>(coords, name) {
  points &lt;-<span class="st"> </span><span class="kw">map</span>(coords, two_d)
  <span class="kw">class</span>(points) &lt;-<span class="st"> &quot;polygon&quot;</span>
  <span class="kw">attr</span>(points, <span class="st">&quot;name&quot;</span>) &lt;-<span class="st"> </span>name
  points
}

toString.polygon &lt;-<span class="st"> </span><span class="cf">function</span>(poly) {
  <span class="kw">paste0</span>(<span class="kw">attr</span>(poly, <span class="st">&quot;name&quot;</span>), <span class="st">&quot;: &quot;</span>, <span class="kw">paste0</span>(<span class="kw">map</span>(poly, toString), <span class="dt">collapse =</span> <span class="st">&quot;, &quot;</span>))
}

right &lt;-<span class="st"> </span><span class="kw">new_polygon</span>(<span class="kw">list</span>(<span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">0</span>), <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">0</span>), <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">1</span>)), <span class="st">&quot;triangle&quot;</span>)
<span class="kw">toString</span>(right)</code></pre>
<pre><code>[1] &quot;triangle: &lt;0, 0&gt;, &lt;1, 0&gt;, &lt;0, 1&gt;&quot;</code></pre>
<p>Now we will add colored shapes:</p>
<pre class="sourceCode r"><code class="sourceCode r">new_colored_polygon &lt;-<span class="st"> </span><span class="cf">function</span>(coords, name, color) {
  object &lt;-<span class="st"> </span><span class="kw">new_polygon</span>(coords, name)
  <span class="kw">attr</span>(object, <span class="st">&quot;color&quot;</span>) &lt;-<span class="st"> </span>color
  <span class="kw">class</span>(object) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;colored_polygon&quot;</span>, <span class="kw">class</span>(object))
  object
}

pinkish &lt;-<span class="st"> </span><span class="kw">new_colored_polygon</span>(<span class="kw">list</span>(<span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">0</span>), <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">0</span>), <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>)), <span class="st">&quot;triangle&quot;</span>, <span class="st">&quot;roseate&quot;</span>)
<span class="kw">class</span>(pinkish)</code></pre>
<pre><code>[1] &quot;colored_polygon&quot; &quot;polygon&quot;        </code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">toString</span>(pinkish)</code></pre>
<pre><code>[1] &quot;triangle: &lt;0, 0&gt;, &lt;1, 0&gt;, &lt;1, 1&gt;&quot;</code></pre>
<p>So far so good:
since we have not defined a method to handle colored polygons specifically,
we get the behavior for a regular polygon.
Let’s add another method that supplements the behavior of the existing method:</p>
<pre class="sourceCode r"><code class="sourceCode r">toString.colored_polygon &lt;-<span class="st"> </span><span class="cf">function</span>(poly) {
  <span class="kw">paste0</span>(<span class="kw">toString.polygon</span>(poly), <span class="st">&quot;+ color = &quot;</span>, <span class="kw">attr</span>(poly, <span class="st">&quot;color&quot;</span>))
}

<span class="kw">toString</span>(pinkish)</code></pre>
<pre><code>[1] &quot;triangle: &lt;0, 0&gt;, &lt;1, 0&gt;, &lt;1, 1&gt;+ color = roseate&quot;</code></pre>
<p>In practice,
we will almost always place all of the methods associated with a class in the same file as its constructor, validator, and helper.
The time has finally come for us to explore projects and packages.</p>
</div>
<div id="key-points-7" class="section level2">
<h2><span class="header-section-number">9.6</span> Key Points</h2>
<ul>
<li>S3 is the most commonly used object-oriented programming system in R.</li>
<li>Every object can store metadata about itself in attributes, which are set and queried with <code>attr</code>.</li>
<li>The <code>dim</code> attribute stores the dimensions of a matrix (which is physically stored as a vector).</li>
<li>The <code>class</code> attribute of an object defines its class or classes (it may have several character entries).</li>
<li>When <code>F(X, ...)</code> is called, and <code>X</code> has class <code>C</code>, R looks for a function called <code>F.C</code> (the <code>.</code> is just a naming convention).</li>
<li>If an object has multiple classes in its <code>class</code> attribute, R looks for a corresponding method for each in turn.</li>
<li>Every user defined class <code>C</code> should have functions <code>new_C</code> (to create it), <code>validate_C</code> (to validate its integrity), and <code>C</code> (to create and validate).</li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="nse.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="debt.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/gvwilson/tidynomicon/edit/master/oop.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["tidynomicon.pdf", "tidynomicon.epub"],
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
